# Maintainer: MedzikUser <nivua1fn@duck.com>
_repo='killercup/cargo-edit'
_ver=v0.8.0
_auto_update=true

_binaries
_pkgname='cargo-edit'
pkgname="${_pkgname}"
pkgver=0.8.0
pkgrel=1
pkgdesc='A utility for managing cargo dependencies from the command line'
arch=('x86_64')
url="https://github.com/${_repo}"
license=('MIT')

depends=('cargo')

source=("${_pkgname}-${pkgver}.tar.gz::${url}/archive/${_ver}/${_pkgname}-${_ver}.tar.gz")
sha256sums=('SKIP')

build() {
  cd "${_pkgname}-${pkgver}"
  cargo build --release --locked
}

package() {
  cd "${_pkgname}-${pkgver}"

  for sub in 'add' 'rm' 'set-version' 'upgrade'
  do
    install -Dm 755 "target/release/cargo-${sub}" "${pkgdir}/usr/bin/cargo-${sub}"
  done

  install -Dm 644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
