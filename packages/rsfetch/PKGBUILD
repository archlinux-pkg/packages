# Maintainer: MedzikUser <nivua1fn@duck.com>
_repo='Polluktus/rsfetch'
_ver=511d8b51cabaa362cdd052c20986ab2dbeabe29c
_auto_update=true
_auto_update_git=true

pkgname='rsfetch'
epoch=1
pkgver=511d8b51cabaa362cdd052c20986ab2dbeabe29c
pkgrel=1
pkgdesc='extremely fast, simple and lightweight fetch program'
arch=('x86_64')
url="https://github.com/$_repo"
license=('unknow')

makedepends=('git' 'cargo')

source=("$pkgname::git+$url")
sha256sums=('SKIP')

pkgver() {
  cd "$pkgname"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
  cd "$pkgname"

  rm -rf .cargo/config.toml

  cargo build --release
}

package() {
  cd "$pkgname"

  install -Dm 755 target/release/$pkgname "$pkgdir/usr/bin/$pkgname"
  #install -Dm 644 LICENSE "$pkgdir/usr/share/licenses/${pkgname}/LICENSE"
}
