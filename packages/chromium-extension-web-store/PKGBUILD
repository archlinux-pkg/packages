# Maintainer: MedzikUser

_repo='NeverDecaf/chromium-web-store'
_ver=v1.4.3
_auto_update=true

_id=ocaahdebbfolfmndjeplogmgcagdmblk

pkgname='chromium-extension-web-store'
pkgver=1.4.3
pkgrel=1
pkgdesc="chromium web store extension (for ungoogled-chromium)"
arch=('any')
url="https://github.com/${_repo}"
license=('MIT')

install='chromium-extension-web-store.install'
source=("${pkgname}-${pkgver}.crx::${url}/releases/download/v${_ver}/Chromium.Web.Store.crx")
noextract=("${pkgname}-${pkgver}.crx")
sha256sums=('SKIP')

prepare() {
  # Create extension json
  cat << EOF > "${_id}".json
{
  "external_crx": "/usr/lib/${pkgname}/${pkgname}-${pkgver}.crx",
  "external_version": "${pkgver}"
}
EOF
}

package() {
  install -Dm 644 -t "${pkgdir}/usr/share/chromium/extensions/" "${_id}.json"
  install -Dm 644 -t "${pkgdir}/usr/lib/${pkgname}/" "${pkgname}-${pkgver}.crx"
}
