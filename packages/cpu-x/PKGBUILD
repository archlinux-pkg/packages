# Maintainer: MedzikUser <nivua1fn@duck.com>
_repo='X0rg/CPU-X'
_ver=v4.2.0
_auto_update=true

_pkgname='cpu-x'
pkgname="${_pkgname}"
pkgver=4.2.0
pkgrel=3
pkgdesc='A Free software that gathers information on CPU, motherboard and more'
arch=('x86_64')
url="https://github.com/${_repo}"
license=('GPL3')
depends=('gtk3' 'ncurses' 'libcpuid' 'pciutils' 'glfw' 'procps-ng')
makedepends=('git' 'cmake' 'ninja' 'nasm')
source=("${_pkgname}::git+${url}#tag=${_ver}")
sha256sums=('SKIP')

build() {
  cd "${pkgname}"

  mkdir build
  cd build

  cmake .. \
    -B build \
    -GNinja \
    -DCMAKE_BUILD_TYPE="Release" \
    -DCMAKE_INSTALL_PREFIX="/usr"
  cmake --build build
}

package() {
  cd "${pkgname}/build"

  DESTDIR="${pkgdir}" ninja -C build install

  cd ..
  install -Dm 644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
